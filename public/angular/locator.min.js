(function(){angular.module("locatorApp",["ngRoute"]);function o(o){o.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}angular.module("locatorApp").config(["$routeProvider",o])})();(function(){angular.module("locatorApp").controller("homeCtrl",o);o.$inject=["$scope","locatorData","geolocation"];function o(o,e,t){var n=this;n.pageHeader={title:"Locator App",strapline:"Find awesome places to work with wifi near you!"};n.sidebar={content:"Looking for  wifi or seat nearby...? Looking for  wifi or seat nearby...? Go and get it, A quick brown fox jumpas over the lazy dog"};n.message="Checking your location";n.getData=function(o){var t=o.coords.latitude,r=o.coords.longitude;n.message="Searching for nearby places";e.locationByCoords(t,r).then(function(o){var e=$.map(o,function(o){return o});console.log("Is it array???   "+Array.isArray(e));n.message=e.length>0?" locations found":"No locations found";n.data={locations:e};console.log("data is here : "+e);n.message=""},function(o){n.message="Sorry something went wrong"})};n.showError=function(e){o.$apply(function(){n.message=e.message;switch(e.code){case e.PERMISSION_DENIED:n.message="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:n.message="Location information is unavailable.";break;case e.TIMEOUT:n.message="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:n.message="An unknown error occurred.";break}})};n.noGeo=function(){o.$apply(function(){n.message="Geolocation is not supported by this browser."})};t.getPosition(n.getData,n.showError,n.noGeo)}})();(function(){angular.module("locatorApp").service("geolocation",o);function o(){var o=function(o,e,t){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(o,e,{enableHighAccuracy:true,timeout:Infinity,maximumAge:0})}else{t()}};return{getPosition:o}}})();(function(){angular.module("locatorApp").service("locatorData",o);o.$inject=["$http"];function o(o){var e=function(e,t){return o.get("/api/locations?lng="+t+"&lat="+e+"&maxDistance=388933184558")};return{locationByCoords:e}}})();(function(){angular.module("locatorApp").filter("formatDistance",e);var o=function(o){return!isNaN(parseFloat(o))&&isFinite(o)};var e=function(){return function(e){var t,n;if(e&&o(e)){if(e>1){t=parseFloat(e).toFixed(1);n="  km"}else{t=parseInt(e*1e3,10);n="  m"}return t+n}if(e==0){return e+"  Km"}else{return"?"}}}})();(function(){angular.module("locatorApp").directive("ratingStars",o);function o(){return{restrict:"EA",scope:{thisRating:"=rating"},templateUrl:"/common/directives/ratingStars/ratingStars.template.html"}}})();